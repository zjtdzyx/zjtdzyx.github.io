
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{d as L,r as f,u as $,a as d,o as w,c as P,w as s,b as i,e as t,f as o,g as p,h as S,E as O,_ as z,i as K,j as G,k as C,F as T,t as H,l as X,m as N,n as J,p as Q,q as W,T as Y,s as h,v as ee,C as oe,x as te}from"./index-B_i3AGOe.js";import{b as B}from"./route-block-B_A1xBdJ.js";const ne={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},le=L({name:"ResetPasswordForm",__name:"index",props:{account:{}},emits:["onLogin","onResetPassword"],setup(V,{emit:b}){const y=V,x=b,k=f(!1),v=$("formRef"),r=f({account:y.account??localStorage.login_account??"",captcha:"",newPassword:""}),g=f({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],newPassword:[{required:!0,trigger:"blur",message:"请输入新密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function E(){var n;O({message:"重置密码仅提供界面演示，无实际功能，需开发者自行扩展",type:"info"}),(n=v.value)==null||n.validate(e=>{e&&x("onResetPassword",r.value.account)})}return(n,e)=>{const m=z,c=d("ElInput"),a=d("ElFormItem"),l=d("ElButton"),F=d("ElLink"),R=d("ElForm");return w(),P(R,{ref_key:"formRef",ref:v,model:o(r),rules:o(g),class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:s(()=>[e[7]||(e[7]=i("h3",{class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"}," 忘记密码了? 🔒 ",-1)),i("div",null,[t(a,{prop:"account"},{default:s(()=>[t(c,{modelValue:o(r).account,"onUpdate:modelValue":e[0]||(e[0]=u=>o(r).account=u),size:"large",placeholder:"用户名",type:"text",tabindex:"1"},{prefix:s(()=>[t(m,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue"])]),_:1}),t(a,{prop:"captcha"},{default:s(()=>[t(c,{modelValue:o(r).captcha,"onUpdate:modelValue":e[1]||(e[1]=u=>o(r).captcha=u),size:"large",placeholder:"验证码",type:"text",tabindex:"2"},{prefix:s(()=>[t(m,{name:"i-ic:baseline-verified-user"})]),append:s(()=>[t(l,null,{default:s(()=>e[4]||(e[4]=[p("发送验证码")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(a,{prop:"newPassword"},{default:s(()=>[t(c,{modelValue:o(r).newPassword,"onUpdate:modelValue":e[2]||(e[2]=u=>o(r).newPassword=u),type:"password",size:"large",placeholder:"新密码",tabindex:"3","show-password":""},{prefix:s(()=>[t(m,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1})]),t(l,{loading:o(k),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:S(E,["prevent"])},{default:s(()=>e[5]||(e[5]=[p(" 确认 ")])),_:1},8,["loading"]),i("div",ne,[t(F,{type:"primary",underline:!1,onClick:e[3]||(e[3]=u=>x("onLogin",o(r).account))},{default:s(()=>e[6]||(e[6]=[p(" 去登录 ")])),_:1})])]),_:1},8,["model","rules"])}}}),se={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},re=L({name:"RegisterForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister"],setup(V,{emit:b}){const y=V,x=b,k=f(!1),v=$("formRef"),r=f({account:y.account??"",captcha:"",password:"",checkPassword:""}),g=f({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:()=>"请输入验证码"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkPassword:[{required:!0,trigger:"blur",message:"请再次输入密码"},{validator:(n,e,m)=>{e!==r.value.password?m(new Error("两次输入的密码不一致")):m()}}]});function E(){var n;O({message:"注册模块仅提供界面演示，无实际功能，需开发者自行扩展",type:"warning"}),(n=v.value)==null||n.validate(e=>{e&&x("onRegister",r.value.account)})}return(n,e)=>{const m=z,c=d("ElInput"),a=d("ElFormItem"),l=d("ElButton"),F=d("ElLink"),R=d("ElForm");return w(),P(R,{ref_key:"formRef",ref:v,model:o(r),rules:o(g),class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:s(()=>[e[9]||(e[9]=i("h3",{class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"}," 探索从这里开始! 🚀 ",-1)),i("div",null,[t(a,{prop:"account"},{default:s(()=>[t(c,{modelValue:o(r).account,"onUpdate:modelValue":e[0]||(e[0]=u=>o(r).account=u),size:"large",placeholder:"用户名",tabindex:"1"},{prefix:s(()=>[t(m,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue"])]),_:1}),t(a,{prop:"captcha"},{default:s(()=>[t(c,{modelValue:o(r).captcha,"onUpdate:modelValue":e[1]||(e[1]=u=>o(r).captcha=u),size:"large",placeholder:"验证码",tabindex:"2"},{prefix:s(()=>[t(m,{name:"i-ic:baseline-verified-user"})]),append:s(()=>[t(l,null,{default:s(()=>e[5]||(e[5]=[p("发送验证码")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(a,{prop:"password"},{default:s(()=>[t(c,{modelValue:o(r).password,"onUpdate:modelValue":e[2]||(e[2]=u=>o(r).password=u),type:"password",size:"large",placeholder:"密码",tabindex:"3","show-password":""},{prefix:s(()=>[t(m,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1}),t(a,{prop:"checkPassword"},{default:s(()=>[t(c,{modelValue:o(r).checkPassword,"onUpdate:modelValue":e[3]||(e[3]=u=>o(r).checkPassword=u),type:"password",size:"large",placeholder:"确认密码",tabindex:"4","show-password":""},{prefix:s(()=>[t(m,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1})]),t(l,{loading:o(k),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:S(E,["prevent"])},{default:s(()=>e[6]||(e[6]=[p(" 注册 ")])),_:1},8,["loading"]),i("div",se,[e[8]||(e[8]=p(" 已经有帐号? ")),t(F,{type:"primary",underline:!1,onClick:e[4]||(e[4]=u=>x("onLogin",o(r).account))},{default:s(()=>e[7]||(e[7]=[p(" 去登录 ")])),_:1})])]),_:1},8,["model","rules"])}}}),ae={class:"mb-6"},ie={class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"},ue={class:"mb-4 flex-center-between"},de={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},me={key:1,class:"flex-col-center"},pe={class:"mt-4 text-center -mb-4"},ce=L({name:"LoginForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister","onResetPassword"],setup(V,{emit:b}){const y=V,x=b,k=K(),v="某农业公司信息管理系统",r=f(!1),g=f("default"),E=$("formRef"),n=f({account:y.account??localStorage.login_account??"",password:"",remember:!!localStorage.login_account}),e=f({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function m(){var a;(a=E.value)==null||a.validate(l=>{l&&(r.value=!0,k.login(n.value).then(()=>{n.value.remember?localStorage.setItem("login_account",n.value.account):localStorage.removeItem("login_account"),x("onLogin",n.value.account)}).finally(()=>{r.value=!1}))})}function c(a){n.value.account=a,n.value.password="123456",m()}return(a,l)=>{const F=J,R=z,u=d("ElInput"),q=d("ElFormItem"),M=d("ElCheckbox"),U=d("ElLink"),I=d("ElButton"),Z=d("el-image"),j=d("ElDivider"),A=d("ElForm");return w(),P(A,{ref_key:"formRef",ref:E,model:o(n),rules:o(e),class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:s(()=>[i("div",ae,[t(F,{modelValue:o(g),"onUpdate:modelValue":l[0]||(l[0]=_=>G(g)?g.value=_:null),options:[{label:"账号密码登录",value:"default"},{label:"扫码登录",value:"qrcode"}]},null,8,["modelValue"])]),o(g)==="default"?(w(),C(T,{key:0},[i("h3",ie," 欢迎使用 "+H(o(v))+" ! 👋🏻 ",1),i("div",null,[t(q,{prop:"account"},{default:s(()=>[t(u,{modelValue:o(n).account,"onUpdate:modelValue":l[1]||(l[1]=_=>o(n).account=_),size:"large",placeholder:"用户名",type:"text",tabindex:"1"},{prefix:s(()=>[t(R,{name:"i-ri:user-3-fill"})]),_:1},8,["modelValue"])]),_:1}),t(q,{prop:"password"},{default:s(()=>[t(u,{modelValue:o(n).password,"onUpdate:modelValue":l[2]||(l[2]=_=>o(n).password=_),type:"password",size:"large",placeholder:"密码",tabindex:"2","show-password":"",onKeyup:X(m,["enter"])},{prefix:s(()=>[t(R,{name:"i-ri:lock-2-fill"})]),_:1},8,["modelValue"])]),_:1})]),i("div",ue,[t(M,{modelValue:o(n).remember,"onUpdate:modelValue":l[3]||(l[3]=_=>o(n).remember=_)},{default:s(()=>l[8]||(l[8]=[p(" 记住我 ")])),_:1},8,["modelValue"]),t(U,{type:"primary",underline:!1,onClick:l[4]||(l[4]=_=>x("onResetPassword",o(n).account))},{default:s(()=>l[9]||(l[9]=[p(" 忘记密码了? ")])),_:1})]),t(I,{loading:o(r),type:"primary",size:"large",style:{width:"100%"},onClick:S(m,["prevent"])},{default:s(()=>l[10]||(l[10]=[p(" 登录 ")])),_:1},8,["loading"]),i("div",de,[l[12]||(l[12]=p(" 还没有帐号? ")),t(U,{type:"primary",underline:!1,onClick:l[5]||(l[5]=_=>x("onRegister",o(n).account))},{default:s(()=>l[11]||(l[11]=[p(" 创建新帐号 ")])),_:1})])],64)):o(g)==="qrcode"?(w(),C("div",me,[t(Z,{src:"https://s2.loli.net/2024/04/26/GsahtuIZ9XOg5jr.png",class:"h-[250px] w-[250px]"}),l[13]||(l[13]=i("div",{class:"mt-2 op-50"}," 请使用微信扫码登录 ",-1))])):N("",!0),i("div",pe,[t(j,null,{default:s(()=>l[14]||(l[14]=[p("演示账号一键登录")])),_:1}),t(I,{type:"primary",size:"small",plain:"",onClick:l[6]||(l[6]=_=>c("admin"))},{default:s(()=>l[15]||(l[15]=[p(" admin ")])),_:1}),t(I,{size:"small",plain:"",onClick:l[7]||(l[7]=_=>c("test"))},{default:s(()=>l[16]||(l[16]=[p(" test ")])),_:1})])]),_:1},8,["model","rules"])}}}),fe="/assets/login-banner-ZfMZACb6.png",ge={class:"login-box"},xe={class:"login-form flex-col-center"},D=L({name:"Login",__name:"login",setup(V){var g;const b=h(),y=ee(),x=Q(),k=f(((g=b.query.redirect)==null?void 0:g.toString())??x.settings.home.fullPath),v=f(),r=f("login");return(E,n)=>{const e=ce,m=re,c=le;return w(),C(T,null,[n[8]||(n[8]=i("div",{class:"bg-banner"},null,-1)),i("div",ge,[n[7]||(n[7]=i("div",{class:"login-banner"},[i("img",{src:W,class:"absolute left-4 top-4 h-30px rounded ring ring-stone-2 dark-ring-stone-8"}),i("img",{src:fe,class:"banner"})],-1)),i("div",xe,[t(Y,{name:"fade",mode:"out-in"},{default:s(()=>[o(r)==="login"?(w(),P(e,{key:0,account:o(v),onOnLogin:n[0]||(n[0]=a=>o(y).push(o(k))),onOnRegister:n[1]||(n[1]=a=>{r.value="register",a=a}),onOnResetPassword:n[2]||(n[2]=a=>{r.value="resetPassword",a=a})},null,8,["account"])):o(r)==="register"?(w(),P(m,{key:1,account:o(v),onOnRegister:n[3]||(n[3]=a=>{r.value="login",a=a}),onOnLogin:n[4]||(n[4]=a=>r.value="login")},null,8,["account"])):o(r)==="resetPassword"?(w(),P(c,{key:2,account:o(v),onOnResetPassword:n[5]||(n[5]=a=>{r.value="login",a=a}),onOnLogin:n[6]||(n[6]=a=>r.value="login")},null,8,["account"])):N("",!0)]),_:1})])]),t(oe)],64)}}});typeof B=="function"&&B(D);const we=te(D,[["__scopeId","data-v-e6f48d19"]]);export{we as default};
